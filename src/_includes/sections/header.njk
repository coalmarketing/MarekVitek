<header class="py-4 ~px-4/8 bg-white border-b border-gray-200 sticky top-0 z-50">
  <div class="container m-auto flex justify-between items-center gap-8">
    <!-- LOGO -->
    <a href="/" class="flex items-center gap-3">
      <img src="/assets/svgs/MarekVitek.svg" alt="{{ client.name }} logo" class="h-12 w-12" decoding="async" loading="eager">
      <div class="flex flex-col">
        <span class="font-bold text-gray-900 text-lg leading-tight">{{ client.name }}</span>
        <span class="text-gray-600 text-xs leading-tight">{{ client.tagline }}</span>
      </div>
    </a>

    <!-- NAVIGATION -->
    <nav class="hidden lg:block">
      <ul class="flex items-center gap-6">
        {% set navPages = collections.all | eleventyNavigation %}

        {# Loop through all pages with a eleventyNavigation in the frontmatter #}
        {% for entry in navPages %}
          {% set hasChild = entry.children.length %}

          <li class="{% if hasChild %}relative group{% endif %}">
            {% if hasChild %}
              {# Dropdown menu #}
              <button class="flex items-center gap-1 px-3 py-2 text-gray-700 hover:text-brand-orange transition-colors duration-300 font-medium">
                {{ entry.key }}
                <svg class="w-3 h-3 transition-transform group-hover:rotate-180" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd"/>
                </svg>
              </button>
              
              {# Dropdown content #}
              <div class="absolute top-full left-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300">
                <ul class="py-2">
                  {% for child in entry.children %}
                    <li>
                      <a href="{{ child.url }}" class="block px-4 py-2 text-gray-700 hover:bg-gray-50 hover:text-brand-orange transition-colors duration-300
                        {%- if child.url == page.url %} text-brand-orange font-semibold{% endif %}">
                        {{ child.key }}
                      </a>
                    </li>
                  {% endfor %}
                </ul>
              </div>
            {% else %}
              {# Regular navigation link or special Kontakt button #}
              {% if entry.key == "Kontakt" %}
                <a href="{{ entry.url }}" class="inline-block px-4 py-2 bg-brand-blue text-white rounded-lg hover:bg-opacity-90 transition-all duration-300 font-medium no-underline
                  {%- if entry.url == page.url %} bg-opacity-80{% endif %}"
                  {%- if entry.url == page.url -%}aria-current="page"{%- endif -%}>
                  {{ entry.key }}
                </a>
              {% else %}
                <a href="{{ entry.url }}" class="inline-block px-3 py-2 text-gray-700 hover:text-brand-orange transition-colors duration-300 font-medium no-underline
                  {%- if entry.url == page.url %} text-brand-orange font-semibold{% endif %}"
                  {%- if entry.url == page.url -%}aria-current="page"{%- endif -%}>
                  {{ entry.key }}
                </a>
              {% endif %}
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </nav>

    <!-- PHONE BUTTON -->
    <div class="flex items-center gap-4">
      <!-- Phone Button -->
      <a href="tel:{{ client.phoneForTel }}" class="phone-button hidden md:flex items-center gap-2 px-4 py-2 bg-white border-2 border-gray-300 rounded-full text-gray-700 hover:border-brand-orange hover:text-brand-orange transition-all duration-300">
        <svg class="w-4 h-4 phone-icon-shake" fill="currentColor" viewBox="0 0 20 20">
          <path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.548.773a11.037 11.037 0 006.105 6.105l.774-1.548a1 1 0 011.059-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z"/>
        </svg>
        <span class="font-medium">{{ client.phoneFormatted }}</span>
      </a>

      <!-- Mobile Menu Button -->
      <button
        id="mobile-menu-toggle"
        class="lg:hidden flex justify-center items-center w-10 h-10 bg-gray-100 rounded-lg transition-transform duration-300"
        type="button"
        aria-expanded="false"
      >
        <span class="sr-only">Otevřít navigaci</span>
        <span class="relative block h-4 w-4">
          <span class="hamburger-line absolute top-0 block h-0.5 w-full bg-gray-600 rounded-full transition-all duration-300"></span>
          <span class="hamburger-line absolute top-1/2 -translate-y-1/2 block h-0.5 w-full bg-gray-600 rounded-full transition-all duration-300"></span>
          <span class="hamburger-line absolute bottom-0 block h-0.5 w-full bg-gray-600 rounded-full transition-all duration-300"></span>
        </span>
      </button>
    </div>
  </div>

  <!-- Mobile Navigation Menu -->
  <nav class="lg:hidden hidden" id="mobile-menu">
    <div class="container m-auto pt-4 border-t border-gray-200">
      <ul class="flex flex-col space-y-2">
        {% set navPages = collections.all | eleventyNavigation %}
        {% for entry in navPages %}
          <li>
            <a href="{{ entry.url }}" class="block px-4 py-3 text-gray-700 hover:bg-gray-50 hover:text-brand-orange transition-colors duration-300 rounded-lg
              {%- if entry.url == page.url %} text-brand-orange font-semibold bg-orange-50{% endif %}">
              {{ entry.key }}
            </a>
          </li>
        {% endfor %}
      </ul>
    </div>
  </nav>
</header>